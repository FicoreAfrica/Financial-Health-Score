<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ translations['Emergency Fund Calculator'] }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="{{ url_for('static', filename='js/comma_format.js') }}"></script>
    <style>
        .ficore-logo { max-width: 200px; margin: 20px auto; display: block; }
        .btn-primary { background-color: #28a745; border-color: #28a745; }
        .btn-primary:hover { background-color: #218838; border-color: #1e7e34; }
        .form-control, .form-select { border-color: #007bff; }
        .alert-container { margin-top: 20px; }
        .form-step { padding: 20px; background-color: #f8f9fa; border-radius: 8px; }
        /* Customize with Ficore's actual logo and colors if different */
    </style>
</head>
<body>
    <div class="container text-center">
        <!-- Ficore Logo -->
        <img src="{{ url_for('static', filename='imag/ficore_logo.png') }}" alt="Ficore Africa Logo" class="ficore-logo">
        <!-- Replace 'ficore_logo.png' with your actual logo file -->

        <h1>{{ translations['Emergency Fund Calculator'] }}</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="alert-container">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="POST" id="emergency-fund-form">
            {{ form.hidden_tag() }}

            <div class="form-step" id="step-1" {% if step != '1' %}style="display: none;"{% endif %}>
                <h2>{{ translations['Personal Information'] }}</h2>
                <div class="form-group mb-3">
                    <label for="{{ form.first_name.id }}">{{ translations['Enter your first name'] }} ?</label>
                    {{ form.first_name(class="form-control", aria_label=translations['Enter your first name']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.email.id }}">‚úâÔ∏è {{ translations['Enter your email'] }} ?</label>
                    {{ form.email(class="form-control", aria_label=translations['Enter your email']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.language.id }}">{{ translations['Choose your language'] }} ?</label>
                    {{ form.language(class="form-select", aria_label=translations['Choose your language']) }}
                </div>
                <button type="button" class="btn btn-primary" onclick="showStep(2)">{{ translations['Next'] }}</button>
            </div>

            <div class="form-step" id="step-2" {% if step != '2' %}style="display: none;"{% endif %}>
                <h2>{{ translations['Financial Details'] }}</h2>
                <div class="form-group mb-3">
                    <label for="{{ form.monthly_expenses.id }}">üíµ {{ translations['Monthly Expenses'] }} (‚Ç¶) ?</label>
                    {{ form.monthly_expenses(class="form-control comma-separated", placeholder="e.g., 50,000", value=monthly_expenses, aria_label=translations['Monthly Expenses']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.monthly_income.id }}">üíµ {{ translations['Monthly Income'] }} (‚Ç¶) ?</label>
                    {{ form.monthly_income(class="form-control comma-separated", placeholder="e.g., 100,000", aria_label=translations['Monthly Income']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.current_savings.id }}">üíµ {{ translations['Current Savings'] }} (‚Ç¶) ?</label>
                    {{ form.current_savings(class="form-control comma-separated", placeholder="e.g., 20,000", aria_label=translations['Current Savings']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.risk_tolerance_level.id }}">‚öñÔ∏è {{ translations['Risk Tolerance Level'] }} ?</label>
                    {{ form.risk_tolerance_level(class="form-select", aria_label=translations['Risk Tolerance Level']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.dependents.id }}">üë®‚Äçüë©‚Äçüëß {{ translations['Number of Dependents'] }} ?</label>
                    {{ form.dependents(class="form-control comma-separated", placeholder="e.g., 2", aria_label=translations['Number of Dependents']) }}
                </div>
                <button type="button" class="btn btn-secondary" onclick="showStep(1)">{{ translations['Back'] }}</button>
                <button type="button" class="btn btn-primary" onclick="showStep(3)">{{ translations['Next'] }}</button>
            </div>

            <div class="form-step" id="step-3" {% if step != '3' %}style="display: none;"{% endif %}>
                <h2>{{ translations['Savings Timeline'] }}</h2>
                <div class="form-group mb-3">
                    <label for="{{ form.timeline.id }}">‚è≥ {{ translations['How long are you willing to save for?'] }} ?</label>
                    {{ form.timeline(class="form-select", aria_label=translations['How long are you willing to save for?']) }}
                </div>
                <div class="form-group mb-3">
                    <label for="{{ form.auto_email.id }}">‚úâÔ∏è {{ translations['Send Results to My Email'] }} ?</label>
                    {{ form.auto_email(class="form-check-input", aria_label=translations['Send Results to My Email']) }}
                </div>
                <button type="button" class="btn btn-secondary" onclick="showStep(2)">{{ translations['Back'] }}</button>
                <button type="submit" class="btn btn-primary">{{ translations['Calculate Fund'] }}</button>
            </div>
        </form>

        <div class="mt-3">
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">{{ translations['Go to Dashboard'] }}</a>
        </div>
    </div>

    <script>
        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(el => el.style.display = 'none');
            document.getElementById(`step-${step}`).style.display = 'block';
        }
    </script>
</body>
</html>
